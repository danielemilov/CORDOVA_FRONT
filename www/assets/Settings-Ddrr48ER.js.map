{"version":3,"file":"Settings-Ddrr48ER.js","sources":["../../src/components/Settings.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport {\n  Box,\n  VStack,\n  Heading,\n  FormControl,\n  FormLabel,\n  Input,\n  Button,\n  useToast,\n  Avatar,\n  Text,\n  Flex,\n} from '@chakra-ui/react';\nimport styled from 'styled-components';\nimport api from '../api';\n\nconst SettingsWrapper = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: #f7f7f7;\n  overflow-y: auto;\n  padding: 20px;\n  z-index: 1000;\n`;\n\nconst CloseButton = styled.button`\n  position: absolute;\n  top: 20px;\n  right: 20px;\n  background: none;\n  border: none;\n  font-size: 24px;\n  cursor: pointer;\n`;\n\nconst SettingsForm = styled.form`\n  max-width: 400px;\n  margin: 0 auto;\n  padding: 20px;\n  background-color: white;\n  border-radius: 10px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n`;\n\nconst StyledInput = styled(Input)`\n  background-color: #f0f0f0;\n  border: none;\n  border-radius: 25px;\n  padding: 10px 15px;\n`;\n\nconst StyledButton = styled(Button)`\n  background-color: #333;\n  color: #27b600;\n  border: none;\n  border-radius: 25px;\n  padding: 10px 20px;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.3s ease;\n\n  &:hover {\n    background-color: #555;\n  }\n`;\n\nfunction Settings({ user, setUser, isOpen, onClose }) {\n  const [formData, setFormData] = useState({\n    username: '',\n    description: '',\n    age: '',\n  });\n  const [isUploading, setIsUploading] = useState(false);\n  const toast = useToast();\n\n  useEffect(() => {\n    if (user) {\n      setFormData({\n        username: user.username || '',\n        description: user.description || '',\n        age: user.age || '',\n      });\n    }\n  }, [user]);\n\n  const handleChange = (e) => {\n    setFormData({ ...formData, [e.target.name]: e.target.value });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const response = await api.put('/api/users/profile', formData);\n      setUser(response.data.user);\n      onClose(response.data.user);\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      toast({\n        title: \"Error\",\n        description: error.response?.data?.message || \"Failed to update profile\",\n        status: \"error\",\n        duration: 3000,\n        isClosable: true,\n      });\n    }\n  };\n\n  const handlePhotoUpload = async (e) => {\n    const file = e.target.files[0];\n    if (!file) return;\n\n    const formData = new FormData();\n    formData.append('photo', file);\n\n    setIsUploading(true);\n    try {\n      const response = await api.post('/api/users/upload-photo', formData, {\n        headers: { 'Content-Type': 'multipart/form-data' }\n      });\n      setUser(prevUser => ({ ...prevUser, photo: response.data.user.photo }));\n      toast({\n        title: \"Photo Updated\",\n        status: \"success\",\n        duration: 3000,\n        isClosable: true,\n      });\n    } catch (error) {\n      console.error('Error uploading photo:', error);\n      toast({\n        title: \"Error\",\n        description: error.response?.data?.message || \"Failed to update photo\",\n        status: \"error\",\n        duration: 3000,\n        isClosable: true,\n      });\n    } finally {\n      setIsUploading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  return (\n    <SettingsWrapper>\n      <CloseButton onClick={onClose}>&times;</CloseButton>\n      <SettingsForm onSubmit={handleSubmit}>\n        <VStack spacing={6}>\n          <Heading as=\"h2\" size=\"xl\" textAlign=\"center\">Edit Profile</Heading>\n          \n          <Flex direction=\"column\" align=\"center\">\n            <Avatar size=\"2xl\" name={user.username} src={user.photo} mb={4} />\n            <FormControl>\n              <FormLabel htmlFor=\"photo\" cursor=\"pointer\">\n                <StyledButton as=\"span\">\n                  {isUploading ? 'Uploading...' : 'Change Profile Photo'}\n                </StyledButton>\n              </FormLabel>\n              <Input\n                type=\"file\"\n                id=\"photo\"\n                accept=\"image/*\"\n                onChange={handlePhotoUpload}\n                hidden\n              />\n            </FormControl>\n          </Flex>\n\n          <FormControl>\n            <FormLabel htmlFor=\"username\">Username</FormLabel>\n            <StyledInput\n              id=\"username\"\n              name=\"username\"\n              value={formData.username}\n              onChange={handleChange}\n            />\n          </FormControl>\n\n          <FormControl>\n            <FormLabel htmlFor=\"description\">Description</FormLabel>\n            <StyledInput\n              id=\"description\"\n              name=\"description\"\n              value={formData.description}\n              onChange={handleChange}\n            />\n          </FormControl>\n\n          <FormControl>\n            <FormLabel htmlFor=\"age\">Age</FormLabel>\n            <StyledInput\n              id=\"age\"\n              name=\"age\"\n              type=\"number\"\n              value={formData.age}\n              onChange={handleChange}\n            />\n          </FormControl>\n\n          <StyledButton type=\"submit\" width=\"full\">\n            Save Changes\n          </StyledButton>\n        </VStack>\n      </SettingsForm>\n    </SettingsWrapper>\n  );\n}\n\nexport default Settings;"],"names":["SettingsWrapper","styled","CloseButton","SettingsForm","StyledInput","Input","StyledButton","Button","Settings","user","setUser","isOpen","onClose","formData","setFormData","useState","isUploading","setIsUploading","toast","useToast","useEffect","handleChange","e","handleSubmit","response","api","error","_b","_a","handlePhotoUpload","file","prevUser","jsx","jsxs","VStack","Heading","Flex","Avatar","FormControl","FormLabel"],"mappings":"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"}